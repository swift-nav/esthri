# Esthri (S3)

[![Build Status](https://jenkins.ci.swift-nav.com/buildStatus/icon?job=swift-nav%2Festhri%2Fmaster)](https://jenkins.ci.swift-nav.com/job/swift-nav/job/esthri/job/master/)

Extremely simple (memory stable) S3 client that supports get, put, head, list,
and sync.

```
esthri 6.0.1
Simple S3 file transfer utility.

USAGE:
    esthri <SUBCOMMAND>

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

SUBCOMMANDS:
    abort           Manually abort a multipart upload
    etag            Compute and print the S3 ETag of the file
    get             Download an object from S3
    head-object     Retreive the ETag for a remote object
    help            Prints this message or the help of the given subcommand(s)
    list-objects    List remote objects in S3
    put             Upload an object to S3
    s3              S3 compatibility layer, providing a compatibility CLI layer for the official AWS S3 CLI tool
    serve           Launch an HTTP server attached to the specified bucket
    sync            Sync a directory with S3
```

## AWS S3 Compatibility Layer

For ease of use, the esthri CLI tool provides a compatible CLI interface for the
`cp` and `sync` operations within the `aws s3` tool, allowing users to use the
`esthri` tool in the same way as they would use the `aws s3` tool for these
select commands. Currently, only the basic case is implemented for these
commands and no no optional arguments are handled.

To use, invoke the esthri tool as you would invoke the AWS S3 tool. For example:

```
$ esthri s3 cp s3://bucket/file file
```

Additionally, esthri can be configured to transparently intercept the S3
commands that it can handle and otherwise invoke the real `aws` tool if it can't.
This can be configured by:

- Either renaming or hard-linking the esthri binary to `aws` or by setting the
  `ESTHRI_AWS_COMPAT_MODE` environment variable.
- Renaming the original `aws` tool to `aws.real`, to allow esthri to call
  through to it when it encounters a command it cannot handle.

Eg:

```
$ ln -s /usr/local/bin/aws /usr/local/bin/aws.real
$ ESTHRI_AWS_COMPAT_MODE=1 esthri s3 help # prints the S3 help text, as generated by the aws command
```
## Copyright

```
Copyright (C) 2021 Swift Navigation Inc.
Contact: Swift Navigation <dev@swiftnav.com>

This source is subject to the license found in the file 'LICENSE' which must be
be distributed together with this source. All other rights reserved.

THIS CODE AND INFORMATION IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A PARTICULAR PURPOSE.
```
